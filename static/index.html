<!DOCTYPE html>
    <html>
    <head>
        <title>Troubleshooting Agent</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="/static/styles.css">
    </head>
    <body>
        <h1>Troubleshooting Agent</h1>
        
        <!-- Navigation par onglets -->
        <div class="tabs-container">
            <div class="tabs-nav">
                <button class="tab-btn active" onclick="switchTab('setup')" id="tab-setup">
                     Setup
                </button>
                <button class="tab-btn" onclick="switchTab('chat')" id="tab-chat">
                     Chat
                </button>
                                <button class="tab-btn" onclick="switchTab('logs')" id="tab-logs">
                    Logs
                </button>
                <button class="tab-btn" onclick="switchTab('history')" id="tab-history">
                    History
                </button>
            </div>
            
            <!-- Contenu des onglets -->
            <div class="tabs-content">
                
                <!-- Onglet Setup -->
                <div class="tab-pane active" id="pane-setup">
                    <h2>Configuration du diagnostic</h2>
                    
                    <div class="setup-section">
                        <h3>Sélection du dossier à analyser</h3>
                        
                        <div class="current-path" id="currentPath">
                            Chargement...
                        </div>
                        
                        <div class="path-controls">
                            <button onclick="goUp()" class="secondary">Dossier parent</button>
                            <button onclick="refreshBrowser()" class="secondary">Actualiser</button>
                        </div>
                        
                        <div class="file-browser" id="fileBrowser">
                            Chargement des dossiers...
                        </div>
                        
                        <div class="selected-folder">
                            <h3>Dossier sélectionné</h3>
                            <div id="selectedPath" class="current-path">
                                Aucun dossier sélectionné
                            </div>
                        </div>
                        
                        <div class="actions">
                            <button onclick="selectCurrentFolder()" class="primary"> Sélectionner ce dossier</button>
                            <button onclick="startDiagnosticAndSwitchToChat()" id="startBtn" class="primary">Lancer le diagnostic</button>
                        </div>
                    </div>
                </div>
                
                <!-- Onglet Chat -->
                <div class="tab-pane" id="pane-chat">
                    <h2>Conversation avec l'agent</h2>
                    
                    <div id="status" class="result" style="display: none;">
                        Statut: Prêt
                    </div>
                    
                    <div id="chatMessages" class="chat-messages">
                        Aucun diagnostic lancé pour le moment...
                    </div>
                    
                    <div class="chat-input">
                        <input type="text" id="chatInput" placeholder="Votre réponse..." disabled>
                        <button id="sendBtn" onclick="sendChatMessage()" disabled>Envoyer</button>
                    </div>
                </div>
                
                <!-- Onglet Logs -->
                <div class="tab-pane" id="pane-logs">
                    <h2>Logs techniques détaillés</h2>
                    
                    <div id="logs" class="logs-display">
                        Aucun diagnostic en cours...
                    </div>
                </div>
                
                <!-- Onglet History -->
                <div class="tab-pane" id="pane-history">
                    <h2>Historique des diagnostics</h2>
                    
                    <div class="history-controls">
                        <select id="appFilter" onchange="loadHistory()">
                            <option value="">Toutes les applications</option>
                        </select>
                        <button onclick="loadHistory()" class="secondary">Actualiser</button>
                    </div>
                    
                    <div id="historyList" class="history-list">
                        Chargement de l'historique...
                    </div>
                </div>
                
            </div>
        </div>

        <!-- Modal pour afficher les détails d'un diagnostic -->
        <div id="diagnosticModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalTitle">Détails du diagnostic</h3>
                    <span class="modal-close" onclick="closeDiagnosticModal()">&times;</span>
                </div>
                <div class="modal-body" id="modalBody">
                    <div class="loading">Chargement...</div>
                </div>
            </div>
        </div>



    <script src="/static/script_new.js"></script>
    </body>
</html>